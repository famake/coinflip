version: '3.9'
services:
  web:
    image: nginx:1.27-alpine
    container_name: coinflip-web
    ports:
      - "80:80"
    volumes:
      - ./index.html:/usr/share/nginx/html/index.html:ro
      - ./app.js:/usr/share/nginx/html/app.js:ro
      - ./styles.css:/usr/share/nginx/html/styles.css:ro
      - ./nginx.conf:/etc/nginx/conf.d/default.conf:ro
      - ./coin-images:/usr/share/nginx/html/coin-images:ro
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "-qO", "/dev/null", "http://localhost/index.html"]
      interval: 30s
      timeout: 5s
      retries: 3
